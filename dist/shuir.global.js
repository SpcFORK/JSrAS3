"use strict";(()=>{var g=(r=>(r[r.Number=0]="Number",r[r.Operator=1]="Operator",r[r.LeftParen=2]="LeftParen",r[r.RightParen=3]="RightParen",r[r.LeftBracket=4]="LeftBracket",r[r.RightBracket=5]="RightBracket",r[r.LeftBrace=6]="LeftBrace",r[r.RightBrace=7]="RightBrace",r[r.String=8]="String",r[r.HexNumStr=9]="HexNumStr",r[r.BinNumStr=10]="BinNumStr",r[r.OctNumStr=11]="OctNumStr",r[r.Vector=12]="Vector",r[r.List=13]="List",r[r.Unknown=14]="Unknown",r[r.EOF=15]="EOF",r))(g||{});var k=class{constructor(a,s){this.type=a;this.value=s}};var N={"^":{precedence:4,associativity:"Right"},"*":{precedence:3,associativity:"Left"},"/":{precedence:3,associativity:"Left"},"+":{precedence:2,associativity:"Left"},"-":{precedence:2,associativity:"Left"}};function B(u){let a=[],s=u.length,n=0,l=(t=n)=>u[t],h=(t=1)=>l(u.length-1-t),p=(t=1)=>l(u.length),b=(t=1)=>l(n+t),i=(t,o)=>a.push(new k(t,o)),f=t=>i(t,u[n]);for(;n<s;){let t=u[n];if(/\d/.test(t)){let o=t;for(;n+1<s&&(/\d/.test(b())||b()==="."&&!o.includes("."));)o+=l(++n);i(0,o)}else if(/[+\-*/^]/.test(t))f(1);else if(t==="(")f(2);else if(t===")")f(3);else if(!/\s/.test(t))if(/0x[0-9A-Fa-f]+/.test(t+p(1))){let o="";for(;n<s&&/[0-9A-Fa-f]/.test(u[n+(o.length>0?0:1)]);)o+=l(n++);i(9,o)}else if(/0b[01]+/.test(t+p(1))){let o="";for(;n<s&&/[01]/.test(u[n+(o.length>0?0:1)]);)o+=l(n++);i(10,o)}else if(/0o[0-7]+/.test(t+p(1))){let o="";for(;n<s&&/[0-7]/.test(u[n+(o.length>0?0:1)]);)o+=l(n++);i(11,o)}else if(t==='"'||t==="'"||t==="`"){let o="";for(;n<s&&(t!==u[n]||t===u[n]&&h()!==t||t===u[n]&&h()===t&&p()===t);)o+=l(n++);i(8,o||t+t)}else throw new Error(`Unknown character: ${t}`);n++}return i(15,""),a}function E(u){let a=B(u),s=[],n=[];var l=4;let h=e=>e===l;function p(e){return new Error("Invalid expression"+(e?`: ${e}`:""))}function b(e){return N[e.value].associativity==="Left"}function i(e){return N[e.value].precedence}function f(e=1){return n[n.length-e]}function t(e){return n.push(e)}function o(){return n.pop()}function w(e){return s.push(e)}function d(e=1){let m=o();if(m)return w(m);throw p()}function c(e,m){return e.type===m}function v(e){return c(e,1)}function r(e){return c(e,0)}function R(e){return c(e,2)}function U(e){return c(e,3)}function x(e){return c(e,4)}function F(e){return c(e,5)}function I(e){return c(e,6)}function K(e){return c(e,7)}function V(e){return c(e,8)}function H(e){return c(e,9)}function A(e){return c(e,10)}function y(e){return c(e,11)}function J(e){return c(e,12)}function W(e){return c(e,13)}function X(e){return c(e,14)}function z(e){return c(e,15)}function C(e){return n.length&&v(f())&&(b(e)&&i(e)<=i(f())||!b(e)&&i(e)<i(f()))}function _(){return h(1)||h(2)||h(3)}function $(){return h(4)}function O(e){l=e}function M(){for(;n.length;)d()}function S(e,m){let j=parseInt(e.value,m);Q(0,j)}function Q(e,m){return w(new k(e,m))}function L(e){for(;n.length&&f().type!==e;)d();o()}for(;a.length;){let e=a.shift();if(r(e))w(e),$()&&O(0);else if(V(e))_()||O(1),w(e);else if(v(e)){for(;C(e);)d();t(e)}else R(e)||x(e)||I(e)?t(e):H(e)?S(e,16):A(e)?S(e,2):y(e)?S(e,8):U(e)?L(2):F(e)?L(4):K(e)?L(6):z(e)&&M()}return s}function P(u){let a=[];var s=4;function n(i){return i===s}function l(){return n(1)||n(2)||n(3)}function h(){return n(4)}function p(i){s=i}function b(i,f,t,o){switch(f.value){case"+":i=t+o;break;case"-":i=t-o;break;case"*":i=t*o;break;case"/":i=t/o;break;case"^":i=Math.pow(t,o);break;default:throw new Error("Unknown operator: "+f.value)}return i}return u.forEach(i=>{switch(i.type){case 0:a.push(parseFloat(i.value));break;case 1:let f=a.pop(),t=a.pop(),o=b(void 0,i,t,f);a.push(o);break;case 8:a.push(i.value),h()&&p(1);break;case 15:break;default:throw new Error("Unexpected TokenType: "+g[i.type])}}),a.pop()}function D(u){return P(E(u))}var G="";console.log(D(G));})();
//# sourceMappingURL=shuir.global.js.map