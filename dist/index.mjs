var U=Object.defineProperty;var x=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Y=(n,e)=>{for(var t in e)U(n,t,{get:e[t],enumerable:!0})};var P="unsure",B=n=>Reflect.has(globalThis,n),f=(n,e)=>B(n)&&(P=e);f("self","webworker"),f("WorkerGlobalScope","worker"),f("module","node"),f("process","node"),f("window","web");var h=P;var R={};Y(R,{AS3_XML:()=>c,AS3_XMLList:()=>d,ASXML:()=>F,AS_EventDispatcher:()=>m,AS_System:()=>X});var m=class{listeners=new Map;addEventListener(e,t,r=!1,i=0,a=!1){this.listeners.has(e)||this.listeners.set(e,[]);let o=this.listeners.get(e);if(o){let l=o.findIndex($=>$.priority<i),s={priority:i,listener:t,useCapture:r};a&&(s.listener=new WeakRef(t)),l===-1?o.push(s):o.splice(l,0,s)}}dispatchEvent(e){let t=this.listeners.get(e.type);if(t){for(let{listener:r}of t)if(!(r instanceof WeakRef))r(e);else{let i=r.deref();i&&i(e)}return!0}return!1}hasEventListener(e){return this.listeners.has(e)}removeEventListener(e,t,r=!1){let i=this.listeners.get(e),a=o=>o.listener instanceof WeakRef?o.listener.deref()!==t:o.listener!==t;i&&this.listeners.set(e,i.filter(o=>a(o)))}willTrigger(e){return this.hasEventListener(e)}};function _(n,...e){if(typeof n!="string")throw new TypeError("command must be a string");let t=e.length===0?[""]:e.map(r=>{if(typeof r=="string"||typeof r=="number")return r.toString();throw new TypeError("args must be strings or numbers")});switch(n.toLowerCase()){case"fullscreen":document.documentElement.requestFullscreen();break;case"allowscale":j(t[0]==="true");break;case"quit":window.close();break;case"showmenu":q(t[0]==="true");break;case"exec":break;case"trapallkeys":G(t[0]==="true");break;default:let r=new URL(window.location.href),i=new URLSearchParams(r.search);i.set("fscommand",n),i.set("fsargs",t.join(",")),r.search=i.toString(),window.location.href=r.toString();break}}var C=globalThis;function j(n){C.AS_allowscale=n}function q(n){C.AS_showmenu=n;let e=new CustomEvent("AS_showmenu",{detail:n});globalThis.dispatchEvent(e)}function G(n){C.AS_trapallkeys=n;let e=new CustomEvent("AS_trapallkeys",{detail:n})}var g=class n{static currentDomain=new n;get parentDomain(){return this.#e}#e;#t=new Map;constructor(e,t){this.#e=e||n.currentDomain,n.currentDomain&&this!==n.currentDomain?this.#e.#t.set(t+"",this):this.#e=null}getDefinition(e){return this.#t.get(e)}hasDefinition(e){return this.#t.has(e)}};var y=class{};var E=class{};var S=class{};var T=class{};var u=class{static CLOSED;static CLOSING;static OPEN};var N=class extends m{#e;#t;#r;#i;#n;#s;constructor(e,t,r){super(),this.#o(e,t,r)}#o(e,t,r){this.#e=u.OPEN,this.#t=e,this.#r=new DataView(e,t,r),this.#i=t,this.#n=r,this.#s=!1}get state(){return this.#e}get buffer(){return this.#t}get view(){return this.#r}get byteOffset(){return this.#i}get byteLength(){return this.#n}get isClosed(){return this.#s}};var A=class{};var M=class{};var D=class{};var b=class{};var X=class{fxcommand=_.bind(this);ApplicationDomain=g;Capabilities=y;IME=E;IMEConversionMode=S;LoaderContext=T;MessageChannel=N;MessageChannelState=u;Security=A;SecurityDomain=M;SecurityPanel=D;System=b};var w=class n{static self=this;self=n;ignoreComments=!0;ignoreProcessingInstructions=!0;ignoreWhitespace=!0;prettyIndent=2;prettyPrinting=!0;defaultSettings(){return new this.self}};var v=class{static ELEMENT_NODE=1;static TEXT_NODE=3;static ENTITY_REFERENCE_NODE=5;static PROCESSING_INSTRUCTION_NODE=7;static DOCUMENT_NODE=9;static DOCUMENT_FRAGMENT_NODE=11},p=class n{attributes={};get childNodes(){return this.#e}#e=this.nodeType==3?void 0:[];get firstChild(){return this.childNodes?.[0]}get lastChild(){return this.childNodes?.[this.childNodes.length-1]||null}get localName(){return this.#t}#t="";withLocalName(e){if(this.#t)throw new Error("Cannot change local name, this is Internal.");return this.#t=e,this}get namespaceURI(){return this.prefix==null?"":this.prefix}get nextSibling(){return this.parentNode?.childNodes?.[this.parentNode.childNodes.indexOf(this)+1]||null}get nodeName(){return this.nodeType==1?this.localName:null}get nodeType(){return this.#r}#r=1;get nodeValue(){return this.#r==3?this.#i:null}#i=null;set nodeValue(e){if(this.#r==1)throw new Error("Invalid node type");this.#i=e}get parentNode(){return this.#n}#n=null;get prefix(){return this.nodeName?.split(":")[0]}get previousSibling(){return this.parentNode?.childNodes?.[this.parentNode.childNodes.indexOf(this)-1]}constructor(e,t){this.#r=e,this.#i=t||null}appendChild(e){if(this.nodeType==3)throw new Error("Invalid node type");this.#e==null&&(this.#e=[]),this.#e.push(e);let t=e.#n;t!=this&&(t?.#s(e),e.#n=this)}#s(e){let t=this.#e?.indexOf(e)||-1;t!=-1&&this.#e?.splice(t,1)}cloneNode(e){let t=new n(this.nodeType,this.#i);if(e&&this.#e!=null)for(let r of this.#e)t.appendChild(r.cloneNode(e));return t}getNamespaceForPrefix(e){if(e=="")return this.namespaceURI;let t=this;for(;t!=null;){if(t.prefix==e)return t.namespaceURI;t=t.parentNode}return null}hasChildNodes(){return this.#e!=null}insertBefore(e,t){if(this.nodeType==3)throw new Error("Invalid node type");if(this.#e==null&&(this.#e=[]),t==null)this.appendChild(e);else{if(this.#e.indexOf(t)==-1)throw new Error("Invalid node");this.#e.splice(this.#e.indexOf(t),0,e)}}removeNode(){if(this.#n==null)throw new Error("Invalid node");if(this.#n.#e?.splice(this.#n.#e.indexOf(this),1),this.#n=null,this.#e)for(let e of this.#e)e.removeNode()}toString(){let e="";if(this.nodeType==3)return e+=this.nodeValue;if(e+="<"+this.nodeName,this.nodeType==1&&this.attributes!=null)for(let t of Object.entries(this.attributes))e+=` ${t[0]}="${t[1]}"`;if(this.#e==null)return e+=" />";e+=">";for(let t of this.#e)e+=t.toString();return e+="</"+this.nodeName+">",e}},I=class n{static SYSTEM(e){return`SYSTEM "${e}"`}SYSTEM=n.SYSTEM;static PUBLIC(e,t){return`PUBLIC "${e}" "${t}"`}PUBLIC=n.PUBLIC;static INTERNAL(e){return`[
${e.join(`
`)}
]`}INTERNAL=n.INTERNAL;static#e=[["&lt;","<"],["&gt;",">"],["&amp;","&"],["&apos;","'"],["&quot;",'"']];static parseEntity(e){return this.#e.find(t=>t[0]==e)?.[1]}parsenEntity=n.parseEntity;static getEntity(e){return this.#e.find(t=>t[1]==e)?.[0]}getEntity=n.getEntity;static DTDMixedSelect=class extends Array{constructor(t){super(t.length),this.fill(void 0),this.map((r,i)=>t[i])}toString(){return this.join("|")}};DTDMixedSelect=n.DTDMixedSelect;static makeMixedSelect(e){return new this.DTDMixedSelect(e)}makeMixedSelect=n.makeMixedSelect;static makeElement(e,t,r=!0){return t=="EMPTY"?r=!0:t=="#PCDATA"?r=!1:Array.isArray(t)&&(r=!0),t=t.toString(),`<!ELEMENT ${e} ${r?`(${t})`:t}>`}makeElement=n.makeElement;static makeAttribute(e,t,r,i,a=!1,o=!1,l=!1){let s=`<!ATTLIST ${e} ${t} ${r}`;return a&&(s+=" #REQUIRED"),o&&(s+=" #IMPLIED"),l&&(s+=" #FIXED"),r=="IDREFS"||r=="NMTOKENS"?(s+=" (",s+=i.toString(),s+=")"):s+=` ${i}`,s+=">",s}makeAttribute=n.makeAttribute;static makeEntity(e,t,r){return`<!ENTITY ${e} ${r} "${t}">`}makeEntity=n.makeEntity;static makeCDATA(e){return`<![CDATA[${e}]]`}makeCDATA=n.makeCDATA},O=class extends p{docTypeDecl=null;idMap=new Map;ignoreWhite=!1;xmlDecl=null;constructor(e=null){super(v.DOCUMENT_NODE,e)}createElement(e){return new p(1).withLocalName(e)}createTextNode(e){return new p(3,e)}parseXML(e,t=1,r="UTF-8",i="no",a="data",o,l=!0){l||=!1;let s=[t,r,i,a,o];l&&this.#i(e,...s),h=="node"?this.#e(e,...s):this.#t(e,...s)}#e(e,...t){try{}catch(l){throw new Error(l+"Require is not defined!")}let{XMLParser:r,XMLBuilder:i,XMLValidator:a}=x("fast-xml-parser");new r().parse(e)}#t(e,...t){let r=this.#r(...t),a=new DOMParser().parseFromString(r+e,"text/xml")}#r(e=1,t="UTF-8",r="no",i="data",a){return`<?xml version="${e}" encoding="${t}" standalone="${r}"?>
<!DOCTYPE ${i} ${a}>`}#i(e,...t){}toString(){return"@ TODO"}},c=class{constructor(...e){}length(){}},d=class{constructor(...e){}length(){}},k=class n{static AS3_XMLModule=this;AS3_XMLModule=n;XMLDocument=O;XMLNode=p;XMLNodeType=v;XMLListClass=d;XMLClass=c;DTDMaker=I;XMLDefaultsClass=w;XMLDefaults=new w;static isXMLName(e){return!!e?.match?.(/^[a-zA-Z0-9_-]+$/)}isXMLName=n.isXMLName;static XML(e){if(e instanceof c)return e;if(e instanceof d&&e.length()!=1)throw new Error("XMLList must contain only one property of type XML");if(typeof e=="boolean"||typeof e=="number")return new c(e.toString());if(typeof e=="string")return new c(e);throw e===void 0?new TypeError("Undefined"):new TypeError("Invalid argument")}XML=n.XML;static XMLList(e){if(e instanceof d)return e;if(typeof e=="boolean"||typeof e=="number")return new d(e.toString());if(typeof e=="string")return new d(e);throw e===void 0?new TypeError("Undefined"):new TypeError("Invalid argument")}XMLList=n.XMLList},F=new k;globalThis?.window&&(globalThis.window.ASXML=F);var L={flash:R},et=L;if(h=="web")Object.assign(globalThis,L),Object.assign(window,L),Object.assign(document,L);else if(h=="node")try{module.exports=L}catch{}export{et as default};
//# sourceMappingURL=index.mjs.map